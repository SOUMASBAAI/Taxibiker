name: Test Secrets Configuration

on:
  workflow_dispatch:

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Check PLANETHOSTER_PROD_HOST
        run: |
          if [ -z "${{ secrets.PLANETHOSTER_PROD_HOST }}" ]; then
            echo "âŒ ERREUR: PLANETHOSTER_PROD_HOST est vide ou n'existe pas"
            exit 1
          else
            echo "âœ… PLANETHOSTER_PROD_HOST existe"
            echo "   Valeur: ${{ secrets.PLANETHOSTER_PROD_HOST }}"
          fi

      - name: Check PLANETHOSTER_PROD_USERNAME
        run: |
          if [ -z "${{ secrets.PLANETHOSTER_PROD_USERNAME }}" ]; then
            echo "âŒ ERREUR: PLANETHOSTER_PROD_USERNAME est vide ou n'existe pas"
            exit 1
          else
            echo "âœ… PLANETHOSTER_PROD_USERNAME existe"
            echo "   Valeur: ${{ secrets.PLANETHOSTER_PROD_USERNAME }}"
          fi

      - name: Check PLANETHOSTER_PROD_PASSWORD
        run: |
          if [ -z "${{ secrets.PLANETHOSTER_PROD_PASSWORD }}" ]; then
            echo "âŒ ERREUR: PLANETHOSTER_PROD_PASSWORD est vide ou n'existe pas"
            exit 1
          else
            echo "âœ… PLANETHOSTER_PROD_PASSWORD existe (masquÃ© pour sÃ©curitÃ©)"
          fi

      - name: Check JWT_PASSPHRASE
        run: |
          if [ -z "${{ secrets.JWT_PASSPHRASE }}" ]; then
            echo "âš ï¸  AVERTISSEMENT: JWT_PASSPHRASE est vide ou n'existe pas"
          else
            echo "âœ… JWT_PASSPHRASE existe"
          fi

      - name: RÃ©sumÃ©
        run: |
          echo ""
          echo "ðŸ“‹ RÃ©sumÃ© :"
          echo "Si vous voyez des âŒ, les secrets correspondants doivent Ãªtre ajoutÃ©s dans :"
          echo "GitHub > Settings > Secrets and variables > Actions > Repository secrets"
          echo ""
          echo "Secrets requis :"
          echo "  - PLANETHOSTER_PROD_HOST"
          echo "  - PLANETHOSTER_PROD_USERNAME"
          echo "  - PLANETHOSTER_PROD_PASSWORD"
          echo "  - JWT_PASSPHRASE"
